version: 1.0
runtime: nodejs22

build:
  commands:
    pre-build:
      - npm install -g pnpm
    build:
      - pnpm install --frozen-lockfile
      - pnpm run build:server
      - pnpm run build:client

run:
  runtime-version: 18
  command: pnpm start
  network:
    port: 3000
    env: APP_PORT
  env:
    - name: NODE_ENV
      value: "production"
